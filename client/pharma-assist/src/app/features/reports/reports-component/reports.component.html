<div class="reports-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">{{ 'reports.title' | translate }}</h1>
      <p class="page-description">{{ 'reports.description' | translate }}</p>
    </div>
    <div class="header-actions">
      <div class="date-filter">
        <button class="date-btn" [class.active]="selectedPeriod === 'today'" (click)="selectPeriod('today')">{{ 'reports.periods.today' | translate }}</button>
        <button class="date-btn" [class.active]="selectedPeriod === 'week'" (click)="selectPeriod('week')">{{ 'reports.periods.week' | translate }}</button>
        <button class="date-btn" [class.active]="selectedPeriod === 'month'" (click)="selectPeriod('month')">{{ 'reports.periods.month' | translate }}</button>
        <button class="date-btn" [class.active]="selectedPeriod === 'year'" (click)="selectPeriod('year')">{{ 'reports.periods.year' | translate }}</button>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="stats-grid">
    @for (stat of quickStats(); track stat.labelKey) {
      <div class="stat-card">
        <div class="stat-main">
          <span class="stat-value">{{ stat.value }}</span>
          @if (stat.change !== undefined) {
            <span class="stat-change" [class.positive]="stat.trend === 'up'" [class.negative]="stat.trend === 'down'">
              @if (stat.trend === 'up') { ↑ } @else if (stat.trend === 'down') { ↓ }
              {{ stat.change }}%
            </span>
          }
        </div>
        <span class="stat-label">{{ stat.labelKey | translate }}</span>
      </div>
    }
  </div>

  <!-- Report Cards -->
  <div class="section-header">
    <h2>{{ 'reports.availableReports' | translate }}</h2>
  </div>

  <div class="reports-grid">
    @for (report of reportCards; track report.id) {
      <a [routerLink]="report.route" class="report-card" [class.disabled]="!report.available">
        <div class="report-icon" [style.background]="report.color">
          @switch (report.icon) {
            @case ('sales') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
            }
            @case ('inventory') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/>
              </svg>
            }
            @case ('chart') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>
              </svg>
            }
            @case ('users') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            }
            @case ('calendar') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
            }
            @case ('file') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
              </svg>
            }
            @case ('builder') {
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
              </svg>
            }
          }
        </div>
        <div class="report-content">
          <h3 class="report-title">{{ report.titleKey | translate }}</h3>
          <p class="report-description">{{ report.descriptionKey | translate }}</p>
        </div>
        <div class="report-arrow">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </div>
        @if (!report.available) {
          <span class="coming-soon">{{ 'common.comingSoon' | translate }}</span>
        }
      </a>
    }
  </div>

  <!-- Recent Reports Section -->
  <div class="section-header">
    <h2>{{ 'reports.recentReports' | translate }}</h2>
    <a routerLink="/reports/history" class="view-all">{{ 'common.viewAll' | translate }} →</a>
  </div>

  <div class="recent-reports">
    @for (report of recentReports(); track $index) {
      <div class="recent-item">
        <div class="recent-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
        </div>
        <div class="recent-info">
          <span class="recent-name">{{ report.name }}</span>
          <span class="recent-date">{{ report.date | date:'medium' }}</span>
        </div>
        <button class="btn-download" [title]="'common.download' | translate">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
        </button>
      </div>
    }
    @if (recentReports().length === 0) {
      <div class="no-recent">
        <p>{{ 'reports.noRecentReports' | translate }}</p>
      </div>
    }
  </div>
</div>
